(function(){"use strict";if(typeof window.import==="undefined"){window.import=function(){return Promise.reject(new Error("import() is not supported in this context"))}}if(typeof window.importMeta==="undefined"){window.importMeta={url:window.location.href,resolve:function(e){return new URL(e,window.location.href).href},env:{MODE:window.location.hostname==="localhost"?"development":"production",DEV:window.location.hostname==="localhost",PROD:window.location.hostname!=="localhost"}}}if(typeof globalThis!=="undefined"){if(typeof globalThis.import==="undefined"){try{Object.defineProperty(globalThis,"import",{value:{meta:window.importMeta},writable:false,configurable:true})}catch(e){globalThis.import={meta:window.importMeta}}}else if(globalThis.import&&!globalThis.import.meta){globalThis.import.meta=window.importMeta}if(typeof window.import==="undefined"){window.import={meta:window.importMeta}}else if(!window.import.meta){window.import.meta=window.importMeta}}var originalEval=window.eval;window.eval=function(code){if(typeof code==="string"&&code.includes("import.meta")){code=code.replace(/import\.meta/g,"window.importMeta")}return originalEval.call(this,code)};var originalAppendChild=Node.prototype.appendChild;Node.prototype.appendChild=function(child){if(child.tagName==="SCRIPT"&&child.src){var originalOnLoad=child.onload;child.onload=function(){if(originalOnLoad)originalOnLoad.call(this)};var originalOnError=child.onerror;child.onerror=function(error){if(error&&error.message&&error.message.includes("import.meta")){console.warn("ProElements: import.meta error caught for script:",child.src);if(!child.type||child.type!=="module"){child.type="module";console.log("ProElements: Converted script to module type:",child.src)}}if(originalOnError)originalOnError.call(this,error)}}return originalAppendChild.call(this,child)};var originalPostMessage=window.postMessage;window.postMessage=function(message,targetOrigin,transfer){try{if(message&&typeof message==="object"){message=JSON.parse(JSON.stringify(message,function(key,value){if(value instanceof URL){return value.href}return value}))}return originalPostMessage.call(this,message,targetOrigin,transfer)}catch(error){console.warn("ProElements: Fixed DataCloneError in postMessage:",error);try{return originalPostMessage.call(this,{error:"DataCloneError"},targetOrigin,transfer)}catch(fallbackError){console.error("ProElements: Failed to send message:",fallbackError)}}};if(typeof chrome!=="undefined"&&chrome.runtime&&chrome.runtime.onMessage){var originalAddListener=chrome.runtime.onMessage.addListener;chrome.runtime.onMessage.addListener=function(callback){var wrappedCallback=function(message,sender,sendResponse){try{var result=callback(message,sender,sendResponse);if(result instanceof Promise){result.catch(function(error){console.warn("ProElements: Caught promise error in onMessage listener:",error)});return true}return result}catch(error){console.warn("ProElements: Caught error in onMessage listener:",error);return false}};return originalAddListener.call(this,wrappedCallback)}}if(typeof Worker!=="undefined"){var OriginalWorker=Worker;window.Worker=function(scriptURL,options){var worker=new OriginalWorker(scriptURL,options);var originalWorkerPostMessage=worker.postMessage;worker.postMessage=function(message,transfer){try{if(message&&typeof message==="object"){message=JSON.parse(JSON.stringify(message,function(key,value){if(value instanceof URL){return value.href}if(value instanceof File||value instanceof Blob){return"[Object "+value.constructor.name+"]"}return value}))}return originalWorkerPostMessage.call(this,message,transfer)}catch(error){console.warn("ProElements: Fixed DataCloneError in Worker postMessage:",error)}};return worker}}function checkElementorElements(){if(typeof elementorFrontend==="undefined"||!elementorFrontend.elements||!elementorFrontend.elements.$body){setTimeout(checkElementorElements,100);return}var originalFind=elementorFrontend.elements.$body.find;elementorFrontend.elements.$body.find=function(selector){try{var result=originalFind.call(this,selector);if(result.length===0&&selector.includes(".elementor-")){console.warn("ProElements: Element not found, attempting to create:",selector);var matches=selector.match(/\.elementor-(\d+)/);if(matches&&matches[1]){var documentId=matches[1];var container=document.querySelector(".elementor-"+documentId);if(!container){container=document.createElement("div");container.className="elementor elementor-"+documentId;container.dataset.elementorType="wp-page";container.dataset.elementorId=documentId;document.body.appendChild(container);console.log("ProElements: Created missing container for document "+documentId)}return $(container)}}return result}catch(error){console.error("ProElements: Error in element find:",error);return $([])}};}if(typeof jQuery!=="undefined"&&jQuery.migrateWarnings){jQuery.migrateTrace=false;jQuery.migrateReset=function(){jQuery.migrateWarnings.length=0}}var originalCreateElement=document.createElement;document.createElement=function(tagName){var element=originalCreateElement.call(this,tagName);if(tagName.toLowerCase()==="script"){var originalSetAttribute=element.setAttribute;element.setAttribute=function(name,value){if(name==="src"&&value&&typeof value==="string"){element.onerror=function(){console.warn("ProElements: Failed to load script:",value)}}return originalSetAttribute.call(this,name,value)}}return element};function preventLayoutForcing(){var style=document.createElement("style");style.textContent=".elementor-element:not(.elementor-loaded){visibility:hidden}.elementor-element.elementor-loaded{visibility:visible}";document.head.appendChild(style)}function initializeFixes(){checkElementorElements();preventLayoutForcing();console.log("ProElements: Compatibility fixes applied")}if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",initializeFixes)}else{initializeFixes()}function addElementorHooks(){if(typeof elementorFrontend!=="undefined"&&elementorFrontend.hooks&&typeof elementorFrontend.hooks.addAction==="function"){try{elementorFrontend.hooks.addAction("frontend/element_ready/global",initializeFixes);console.log("ProElements: Successfully added Elementor hooks")}catch(error){console.warn("ProElements: Failed to add Elementor hooks:",error)}}else{var retryCount=0;var maxRetries=50;function retryAddHooks(){if(retryCount>=maxRetries){console.warn("ProElements: Gave up waiting for elementorFrontend.hooks after 5 seconds");return}if(typeof elementorFrontend!=="undefined"&&elementorFrontend.hooks&&typeof elementorFrontend.hooks.addAction==="function"){try{elementorFrontend.hooks.addAction("frontend/element_ready/global",initializeFixes);console.log("ProElements: Successfully added Elementor hooks on retry",retryCount)}catch(error){console.warn("ProElements: Failed to add Elementor hooks on retry:",error)}}else{retryCount++;setTimeout(retryAddHooks,100)}}retryAddHooks()}}addElementorHooks();if(typeof jQuery!=="undefined"){jQuery(document).on("elementor/frontend/init",function(){console.log("ProElements: Elementor frontend initialized");addElementorHooks()})}if(typeof __webpack_require__!=="undefined"&&typeof __webpack_require__.r==="undefined"){__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})}}})();